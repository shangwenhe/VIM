
## 分解定义
### 定义模块
```javascript
// 定义模块
var modules = [(function (module, exports, __webpack_require__){
  module.exports = { index:'test0' }
})]
```

### 定义加载器 解决模块依赖关系
```javascript
// 模块加载器
function __webpack_require__(moduleId){
    // ... 
  	// 统一管理所有模块
    var module ={ exports: {} };
  	modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
  	return module.exports;
}
```

### 入口文件
```javascript
// 入口文件
function entry(){
    // 加载模块
    let test = __webpack_require__(0);
  	console.log(test.index);
}
entry();
```


## 完整示例
```javascript
(function(modules){
   var installedModules = {};
  
  	// webpack 的迭代器
    function __webpack_require__(moduleId){
 		if(installedModules[moduleId]) {
          return installedModules[moduleId].exports;
        }
      	// console.log(installedModules);
 		var module = installedModules[moduleId] = {
 				exports: {}
			};
      	// console.log(moduleId,module,installedModules);
  	 	modules[moduleId].call(module.exports,
        	module, module.exports, __webpack_require__
        );
     	return module.exports;
    }
  
  return __webpack_require__(0)
  
})([
  	(function(module, exports, __webpack_require__){
      	console.log(0); 
        let m1 = __webpack_require__(1)
        let m2 = __webpack_require__(2)
      	module.exports = { index:'test0', m1: m1, m2:m2}
    }), 
  	(function(module, exports, __webpack_require__){
     console.log(1); 
      __webpack_require__(2);
      module.exports =  { index:'test1'}
    }), 
  	(function(module, exports, __webpack_require__){
        console.log(2);
       __webpack_require__(3);
       module.exports =  { index:'test2'}
    }), 
    (function(module, exports, __webpack_require__){
        console.log(3)
       module.exports =  { index:'test3'}
    })
])
```
